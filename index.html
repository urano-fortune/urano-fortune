<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>恋愛相談-ウラーノ-</title>
  
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-KCHQ8DY8MD"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-KCHQ8DY8MD');
  </script>

  <link href="https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --bg-green: radial-gradient(circle at top, #0f6b5f, #063b35);
      --gold-gradient: linear-gradient(135deg, #f5e18b 0%, #d4af37 50%, #b8860b 100%);
      --accent-gold: #d4af37;
      --box-white: rgba(255, 255, 255, 0.98); 
    }

    body {
      margin: 0; min-height: 100vh; font-family: 'Shippori Mincho', serif;
      background: var(--bg-green); color: #333; display: flex;
      justify-content: center; align-items: center; overflow-y: auto; padding: 20px 0;
    }

    #particle-container { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: 0; pointer-events: none; }
    .container { width: 92%; max-width: 500px; z-index: 1; }

    .outer-frame {
      padding: 4px; background: var(--gold-gradient); border-radius: 20px;
      box-shadow: 0 15px 45px rgba(0,0,0,0.4);
    }

    .inner-content {
      background: var(--box-white); border-radius: 16px; padding: 35px 25px;
      text-align: center; border: 1px solid rgba(212, 175, 55, 0.2);
      min-height: 400px; display: flex; flex-direction: column; justify-content: center;
    }

    .logo-img { max-width: 140px; margin-bottom: 15px; }
    .main-title { font-size: 22px; margin: 0; background: var(--gold-gradient); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700; letter-spacing: 0.1em; }
    .sub-title { font-size: 11px; margin-top: 8px; color: #888; letter-spacing: 0.2em; font-weight: bold; }

    .intro-text { font-size: 0.95rem; line-height: 2; color: #444; margin: 30px 0; }
    .start-btn { 
      padding: 16px 40px; background: var(--gold-gradient); color: #fff; 
      border: none; border-radius: 50px; font-weight: bold; cursor: pointer; 
      font-size: 1.1rem; box-shadow: 0 4px 15px rgba(212, 175, 55, 0.4); 
      transition: 0.3s; font-family: inherit;
    }

    .disclaimer {
      font-size: 0.65rem;
      color: #a0a0a0;
      margin-top: 20px;
      line-height: 1.6;
      text-align: center;
    }
    
    #quiz-ui, #result-display { display: none; }
    .q-counter { font-size: 11px; color: var(--accent-gold); margin-bottom: 10px; font-weight: bold; }
    #question { font-size: 1.1rem; line-height: 1.7; color: #2c4a44; margin: 20px 0 35px; min-height: 3.4em; display: flex; align-items: center; justify-content: center; }
    .progress-wrapper { background: #eee; height: 3px; border-radius: 10px; margin-bottom: 25px; }
    .progress-bar { height: 100%; width: 0%; background: var(--gold-gradient); transition: 0.6s; }
    .btn-group { display: flex; justify-content: center; gap: 20px; }
    .btn { width: 120px; padding: 14px 0; border-radius: 50px; font-weight: bold; cursor: pointer; font-family: inherit; transition: 0.3s; }
    .btn-yes { background: var(--gold-gradient); color: #fff; border: none; }
    .btn-no { background: #fff; color: #999; border: 1px solid #ddd; }

    .result-theme { font-size: 1.25rem; color: #b8860b; font-weight: 700; border-bottom: 1px solid #eee; padding-bottom: 15px; margin-bottom: 20px; display: block; }
    .result-desc { font-size: 0.9rem; line-height: 1.8; color: #555; text-align: left; white-space: pre-wrap; margin-bottom: 30px; }
    
    .recommend-label {
      font-size: 0.95rem; color: #b8860b; font-weight: 700; text-align: center;
      margin: 35px 0 15px; display: flex; align-items: center; justify-content: center; gap: 10px;
    }
    .recommend-label::before, .recommend-label::after { content: ""; height: 1px; flex-grow: 1; background: rgba(212, 175, 55, 0.3); }

    .expert-card { display: flex; align-items: center; gap: 15px; background: #fdfaf0; padding: 15px; border-radius: 12px; margin-bottom: 20px; border: 1px solid #f0e6c8; text-align: left; }
    .expert-photo img { width: 70px; height: 70px; border-radius: 50%; border: 2px solid var(--accent-gold); object-fit: cover; }
    .expert-info { flex: 1; }
    .expert-name { margin: 0; font-size: 1.1rem; color: #2c4a44; font-weight: bold; }
    .expert-caption { margin: 5px 0 0; font-size: 0.75rem; color: #666; line-height: 1.4; }
    .consult-btn { display: block; width: 100%; padding: 16px 0; background: var(--gold-gradient); color: #fff; text-decoration: none; font-weight: bold; border-radius: 10px; box-shadow: 0 4px 15px rgba(212, 175, 55, 0.3); text-align: center; font-size: 1rem; }

    .fade-in { animation: fadeIn 0.8s ease forwards; }
    @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
  </style>
</head>
<body>

  <div id="particle-container"></div>

  <div class="container">
    <div class="outer-frame">
      <div class="inner-content">
        
        <div id="intro-ui" class="fade-in">
          <img src="images/logo.png" alt="ウラーノ" class="logo-img">
          <h1 class="main-title">恋愛相談-ウラーノ-</h1>
          <div class="sub-title">― 真実の縁を結ぶ ―</div>
          <p class="intro-text">
            あなたの魂が求めている「答え」を、<br>
            導き出す準備はできましたか？<br><br>
            10の問いかけを通じて、<br>
            今、あなたに最も必要なメッセージと<br>
            運命の鑑定師を見つけ出しましょう。
          </p>
          <button class="start-btn" onclick="startQuiz()">運命の扉を開く</button>
        </div>

        <div id="quiz-ui">
          <div class="progress-wrapper"><div class="progress-bar" id="progressBar"></div></div>
          <div id="counter" class="q-counter"></div>
          <h2 id="question"></h2>
          <div class="btn-group">
            <button class="btn btn-yes" onclick="handleAnswer(true)">はい</button>
            <button class="btn btn-no" onclick="handleAnswer(false)">いいえ</button>
          </div>
        </div>

       <div id="result-display" class="fade-in">
          <span class="result-theme" id="resultTheme"></span>
          <p class="result-desc" id="resultDesc"></p>
          <div class="recommend-label">あなたにオススメの先生</div>
          <div id="expert-container">
            <div class="expert-card">
              <div class="expert-photo"><img src="" id="expertImg" alt="鑑定師"></div>
              <div class="expert-info">
                <h3 class="expert-name" id="expertName"></h3>
                <p class="expert-caption" id="expertCaption"></p>
              </div>
            </div>
            <a href="" id="expertLink" class="consult-btn"></a>
          </div>
          
          <p class="disclaimer">
            本診断は一般的な傾向を示すもので、将来を保証するものではありません。<br>
            「もっと深く知りたい」「今の状況を具体的に変えたい」と思われたときは、<br>
            ぜひ一度先生を頼ってみてくださいね。
          </p>
        </div>

      </div>
    </div>
  </div>

<script>
    // 背景パーティクル（変更なし）
    const pContainer = document.getElementById('particle-container');
    for (let i = 0; i < 40; i++) {
      const p = document.createElement('div');
      p.style.position = 'absolute'; p.style.background = '#fff'; p.style.borderRadius = '50%';
      const size = (Math.random() * 2 + 1) + 'px';
      p.style.width = size; p.style.height = size;
      p.style.left = Math.random() * 100 + '%'; p.style.top = Math.random() * 100 + '%';
      p.style.opacity = Math.random() * 0.3;
      pContainer.appendChild(p);
    }

    const questions = [
      "最近、あの人のことを考える時間が増えましたか？",
      "連絡が来ると少し期待してしまいますか？",
      "本音を伝えられずにいると感じますか？",
      "相手の気持ちが気になって眠れない夜はありますか？",
      "関係を信じたい気持ちはありますか？",
      "占いの結果だけでなく、先生との心の通い合った会話も大切にしたい。鑑定と対話、その両方をバランスよく求めていますか？",
      "表面的な答えではなく、現状や未来を細部まで緻密に読み解き、一つ一つの結果を論理的に分かりやすく解説してくれる丁寧で濃密な鑑定を求めますか？",
      "アドバイスの前に、まずはあなたの胸の内を否定せず最後まで受け止めてくれる、『親友のように何でも話しやすい』安心感を大切にしたいですか？",
      "占いの結果だけに留まらず、今抱えているお悩みに対して、具体的で現実的なアクションプランを一緒に練り上げられる『頼れる友達』のような対話を希望しますか？",
      "キャリアの長さよりも、今のあなたに100%の情熱を注いでくれる、今がお得な『期待の新星』に相談したいですか？"
    ];

    const experts = {
      yuen: { name: "優縁 先生", theme: "対話と鑑定の調和", desc: "心を通わせる対話を重視するあなたには、優縁先生が最適です。温かなエネルギーと共に、納得のいく未来を共に描きます。", img: "images/優縁さん.png", url: "urano://counselor?code=3492166", caption: "あなた様の願いに寄り添い、進むべき道へと灯火をともします。" },
      toko: { name: "瞳子 先生", theme: "緻密で論理的な未来図", desc: "細部まで読み解く緻密さを求めるあなたには、瞳子先生がぴったりです。論理的で分かりやすい解説が、迷いを確信に変えるでしょう。", img: "images/瞳子さん.jpg", url: "urano://counselor?code=8157232", caption: "バリ島の神聖なエネルギーで、現状と未来を鮮明に読み解きます。" },
      meishin: { name: "明心 先生", theme: "安心感に包める鑑定", desc: "親友のような話しやすさを求めるあなたには、明心先生が寄り添います。否定のない優しい対話が、あなたの心を軽くします。", img: "images/明心さん.png", url: "urano://counselor?code=23351095", caption: "今のあなたに本当に必要なメッセージを、愛を持って丁寧にお届けします。" },
      ryutaro: { name: "リュウタロー 先生", theme: "心強い味方としての対話", desc: "現実的なアクションプランを必要とするあなたには、リュウタロー先生が伴走します。友達のような気軽さで、深い悩みも解決へ導きます。", img: "images/リュウタロー先生.png", url: "urano://counselor?code=3688274", caption: "言葉にできない心の奥底を汲み取り、具体的な一歩を導き出します。" },
      uha: { name: "愛羽 先生", theme: "情熱あふれる期待の新星", desc: "100%の情熱で向き合ってほしいあなたには、愛羽先生が全力で応えます。フレッシュかつ鋭い鑑定が、現状を打破するきっかけになります。", img: "images/愛羽先生.png", url: "urano://counselor?code=28434629", caption: "「今なにが起きているか」を現実的・具体的にお伝えし、流れを変えます。" }
    };

    let currentIdx = 0;
    let answers = [];

    function startQuiz() {
      gtag('event', 'quiz_start');
      document.getElementById("intro-ui").style.display = "none";
      document.getElementById("quiz-ui").style.display = "block";
      render();
    }

    function render() {
      document.getElementById("question").textContent = questions[currentIdx];
      document.getElementById("counter").textContent = `第 ${currentIdx + 1} 問 / 全 ${questions.length} 問`;
      document.getElementById("progressBar").style.width = ((currentIdx / questions.length) * 100) + "%";
    }

    function handleAnswer(isYes) {
      answers[currentIdx] = isYes;
      currentIdx++;
      if (currentIdx < questions.length) render();
      else calculateResult();
    }

    function calculateResult() {
      // 1. Q10(index 9)がYesなら、無条件で愛羽先生
      if (answers[9]) {
        return showResult(experts.uha);
      }

      // 2. Q6〜Q9の中でYesがついた候補をリストアップ
      let candidates = [];
      if (answers[5]) candidates.push(experts.yuen); // Q6
      if (answers[6]) candidates.push(experts.toko); // Q7
      if (answers[7]) { // Q8は明心orリュウタローのランダム枠
          candidates.push(experts.meishin);
          candidates.push(experts.ryutaro);
      }
      if (answers[8]) { // Q9も明心orリュウタローのランダム枠
          candidates.push(experts.meishin);
          candidates.push(experts.ryutaro);
      }

      // 重複を削除（Q8とQ9両方Yesの場合に備えて）
      candidates = Array.from(new Set(candidates));

      // 3. 判定
      if (candidates.length > 0) {
        // Yesがあった人の中からランダム
        const finalSelection = candidates[Math.floor(Math.random() * candidates.length)];
        showResult(finalSelection);
      } else {
        // 全部No（Q6〜Q10すべてNo）なら、全先生からランダム
        const allExperts = Object.values(experts);
        const finalSelection = allExperts[Math.floor(Math.random() * allExperts.length)];
        showResult(finalSelection);
      }
    }

    function showResult(expert) {
      document.getElementById("quiz-ui").style.display = "none";
      document.getElementById("resultTheme").textContent = expert.theme;
      document.getElementById("resultDesc").textContent = expert.desc;
      document.getElementById("expertImg").src = expert.img;
      document.getElementById("expertName").textContent = expert.name;
      document.getElementById("expertCaption").innerText = expert.caption;
      document.getElementById("expertLink").href = expert.url;
      document.getElementById("expertLink").textContent = `${expert.name}に今すぐ相談する`;
      document.getElementById("result-display").style.display = "block";
    }
  </script>
</body>
</html>
